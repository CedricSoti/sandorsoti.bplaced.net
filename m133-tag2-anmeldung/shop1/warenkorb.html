<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Warenkorb</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>

<div class="w3-container w3-padding-32">
  <h2 class="w3-center">Dein Warenkorb</h2>
  <div id="cart-list" class="w3-container"></div>
  <div class="w3-container w3-margin-top">
    <button class="w3-button w3-red" onclick="clearCart()">Warenkorb leeren</button>
    <a href="shop" class="w3-button w3-grey">Zurück zum Shop</a>
  </div>
</div>

<script>
  function renderCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const list = document.getElementById("cart-list");

    if (cart.length === 0) {
      list.innerHTML = "<p>Dein Warenkorb ist leer.</p>";
      return;
    }

    let html = '<ul class="w3-ul w3-card">';
    let total = 0;

    cart.forEach((item, index) => {
      html += `<li>
        ${item.name} – CHF ${item.price}.–
        <button onclick="removeItem(${index})" class="w3-button w3-small w3-right w3-red">Entfernen</button>
      </li>`;
      total += item.price;
    });

    html += `</ul><p><strong>Total: CHF ${total}.–</strong></p>`;
    list.innerHTML = html;
  }

  function clearCart() {
    localStorage.removeItem('cart');
    renderCart();
  }

  function removeItem(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  }

  renderCart();
</script>

</body>
</html>